<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Transcript | Symaedchit Octavius Leo</title>
  <meta name="description" content="Transcript (view + download)." />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <header class="wrap">
    <div class="pagebar">
      <a class="link" href="index.html#resumes">← Back</a>
      <div>
        <h1 class="page-title">Transcript (PDF)</h1>
        <p class="page-sub">View in-browser or download.</p>
      </div>
      <div class="page-actions">
        <a class="btn" id="downloadPdf" href="Transcript/OfficialTranscript.pdf" download>Download PDF</a>
        <a class="btn" id="openPdf" href="Transcript/OfficialTranscript.pdf" target="_blank" rel="noreferrer">Open PDF</a>
      </div>
    </div>
  </header>

  <main class="wrap">
    <div class="viewer">
      <!-- Direct embed -->
      <iframe
        id="pdfFrame"
        src="Transcript/OfficialTranscript.pdf"
        title="Transcript PDF"
        loading="lazy">
      </iframe>
    </div>

    <noscript>
      <p><a class="link" href="Transcript/OfficialTranscript.pdf">Open transcript PDF →</a></p>
    </noscript>
  </main>

    <script>
      // Force a true download dialog instead of inline open
      const pdfUrl = new URL("Transcript/OfficialTranscript.pdf", window.location.href).toString();
      const downloadBtn = document.getElementById("downloadPdf");
      const openBtn = document.getElementById("openPdf");
      const frame = document.getElementById("pdfFrame");

      if (openBtn) openBtn.href = pdfUrl;
      if (frame) frame.src = pdfUrl;
      if (downloadBtn) {
        downloadBtn.href = pdfUrl;
        downloadBtn.setAttribute("download", "OfficialTranscript.pdf");
        downloadBtn.addEventListener("click", async (event) => {
          event.preventDefault();
          try {
            const response = await fetch(pdfUrl);
            if (!response.ok) throw new Error("failed fetch");
            const blob = await response.blob();
            const blobUrl = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = blobUrl;
            a.download = "OfficialTranscript.pdf";
            document.body.appendChild(a);
            a.click();
            a.remove();
            URL.revokeObjectURL(blobUrl);
          } catch (err) {
            // Fallback to normal navigation if fetch fails
            window.location.href = pdfUrl;
          }
        });
      }
    </script>
</body>
</html>
